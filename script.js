document.addEventListener('DOMContentLoaded', () => {
  const navLinks = document.querySelectorAll('.nav-link');
  const pages = document.querySelectorAll('.page-content');
  const notification = document.getElementById('copy-notification');
  let currentPage = localStorage.getItem('currentPage') || 'home';

  // ‡πÇ‡∏´‡∏•‡∏î‡∏´‡∏ô‡πâ‡∏≤
  function loadPage(page) {
    pages.forEach(p => p.classList.remove('active'));
    const pageElement = document.getElementById(`${page}-page`);
    if (pageElement) pageElement.classList.add('active');
    localStorage.setItem('currentPage', page);
  }

  loadPage(currentPage);

  // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡πÄ‡∏°‡∏ô‡∏π active
  navLinks.forEach(navLink => {
    navLink.classList.toggle('active', navLink.getAttribute('data-page') === currentPage);
    navLink.addEventListener('click', e => {
      if (navLink.tagName.toLowerCase() === 'a') e.preventDefault();
      const targetPage = navLink.getAttribute('data-page');
      if (targetPage === currentPage) return;
      currentPage = targetPage;
      loadPage(currentPage);
      navLinks.forEach(link => link.classList.toggle('active', link.getAttribute('data-page') === targetPage));
    });
  });

  // ‡πÅ‡∏™‡∏î‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
  function showNotification() {
    notification.classList.add('show');
    setTimeout(() => notification.classList.remove('show'), 2000);
  }

  async function copyTextAndNotify(text) {
    try {
      await navigator.clipboard.writeText(text);
      showNotification();
    } catch {
      const temp = document.createElement('textarea');
      temp.value = text;
      document.body.appendChild(temp);
      temp.select();
      document.execCommand('copy');
      document.body.removeChild(temp);
      showNotification();
    }
  }

  // ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÉ‡∏´‡πâ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° output ‡πÅ‡∏•‡∏∞ chat-box ‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÑ‡∏î‡πâ
  const copyableBoxes = document.querySelectorAll('.chat-box, [id^="output"], [id^="noteOutput"]');

  copyableBoxes.forEach(box => {
    box.style.cursor = 'pointer';
    box.addEventListener('click', () => {
      const textToCopy = box.innerText.trim();
      copyTextAndNotify(textToCopy);
    });
  });
});

// --------------------------
// üéÅ ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô (‡∏™‡∏≤‡∏¢‡πÄ‡∏õ‡∏¢‡πå / ‡∏ù‡∏≤‡∏Å‡πÅ‡∏£‡∏Å)
// --------------------------

function generateBonusText() {
  const user = document.getElementById('user').value;
  const bonus = document.getElementById('bonus').value;
  const name = document.getElementById('name').value;
  
  const note = `‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô : ‡∏™‡∏≤‡∏¢‡πÄ‡∏õ‡∏¢‡πå ${bonus} ‡∏ö‡∏≤‡∏ó`;

  document.getElementById('output1').innerText = 
`üß© ‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ï‡∏¥‡∏°‡πÇ‡∏ö‡∏ô‡∏±‡∏™ üß©
‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô‡∏™‡∏≤‡∏¢‡πÄ‡∏õ‡∏¢‡πå

User : ${user}
‡∏¢‡∏≠‡∏î‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï  : ${bonus}

‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏î‡∏µ ‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç
‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡πÉ‡∏´‡πâ‡πÇ‡∏≠‡∏Å‡∏≤‡∏™‡πÄ‡∏£‡∏≤
‡πÑ‡∏î‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏ô‡∏∞‡∏Ñ‡∏∞‚ù§Ô∏è`;

  document.getElementById('output2').innerText = 
`‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô: ‡∏™‡∏≤‡∏¢‡πÄ‡∏õ‡∏¢‡πå üß©
üß©‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤: ${name}
üß©User: ${user}
üß©‡∏¢‡∏≠‡∏î‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï: ${bonus}
üß©‡∏ú‡∏π‡πâ‡πÄ‡∏ï‡∏¥‡∏°: TA üß©`;

  document.getElementById ('outputNote1').innerText = `‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô : ‡∏™‡∏≤‡∏¢‡πÄ‡∏õ‡∏¢‡πå ${bonus} ‡∏ö‡∏≤‡∏ó`;
}

function generateBonusText2() {
  const user = document.getElementById('user2').value;
  const deposit = Number(document.getElementById('deposit2').value) || 0;
  const name = document.getElementById('name2').value;

  const bonus = Math.round(deposit * 0.03);              // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì
  const bonusText = `${bonus} ‡∏ö‡∏≤‡∏ó`;                      // ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•


  const note = `‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô : ‡πÇ‡∏ö‡∏ô‡∏±‡∏™‡∏¢‡∏≠‡∏î‡∏ù‡∏≤‡∏Å‡πÅ‡∏£‡∏Å 3% ‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô ${bonus} ‡∏ö‡∏≤‡∏ó`;

  document.getElementById('output3').innerText = 
`üß© ‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ï‡∏¥‡∏°‡πÇ‡∏ö‡∏ô‡∏±‡∏™ üß©
‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô ‡∏ù‡∏≤‡∏Å‡πÅ‡∏£‡∏Å‡∏£‡∏±‡∏ö 3 %

User : ${user}
‡∏¢‡∏≠‡∏î‡∏ù‡∏≤‡∏Å : ${deposit} ‡∏ö‡∏≤‡∏ó
‡πÇ‡∏ö‡∏ô‡∏±‡∏™‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö : ${bonus} ‡∏ö‡∏≤‡∏ó

‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏î‡∏µ ‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç
‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡πÉ‡∏´‡πâ‡πÇ‡∏≠‡∏Å‡∏≤‡∏™‡πÄ‡∏£‡∏≤
‡πÑ‡∏î‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏ô‡∏∞‡∏Ñ‡∏∞‚ù§Ô∏è`;

  document.getElementById('output4').innerText = 
`üß© ‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô : ‡∏ù‡∏≤‡∏Å‡πÅ‡∏£‡∏Å‡∏£‡∏±‡∏ö 3 % üß©
üß© ‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ : ${name}
üß© User : ${user}
üß© ‡∏¢‡∏≠‡∏î‡πÄ‡∏ï‡∏¥‡∏°‡πÄ‡∏Ñ‡∏£‡∏î‡∏¥‡∏ï : ${bonus} ‡∏ö‡∏≤‡∏ó
üß© ‡πÄ‡∏ï‡∏¥‡∏°‡πÇ‡∏î‡∏¢ : TA üß©`;

  document.getElementById('outputNote2').innerText = `‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô : ‡πÇ‡∏ö‡∏ô‡∏±‡∏™‡∏¢‡∏≠‡∏î‡∏ù‡∏≤‡∏Å‡πÅ‡∏£‡∏Å 3% ‡∏ó‡∏∏‡∏Å‡∏ß‡∏±‡∏ô ${bonus} ‡∏ö‡∏≤‡∏ó`;
}


// --------------------------
// üîÅ ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ü‡∏£‡∏µ‡πÄ‡∏Å‡∏° X10
// --------------------------

function generateBonusText3() {
  const user = document.getElementById('user3').value;
  const billNumber = document.getElementById('billNumber').value;
  const priceBet = Number(document.getElementById('priceBet').value) || 0;
  const name = document.getElementById('name3').value;
  const dayTime = document.getElementById('dayTime').value;

  const betValue = `${priceBet} ‡∏ö‡∏≤‡∏ó`;
  const bonusAmount = priceBet * 10;

  const note = `‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ü‡∏£‡∏µ ‡∏£‡∏±‡∏ö‡∏ü‡∏£‡∏µ x10 | #${billNumber} | ‡πÄ‡∏ö‡∏ó ${priceBet}/${deposit} ‡∏ö‡∏≤‡∏ó ‡∏ö‡∏¥‡∏•‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà ${dayTime}`;

  document.getElementById('output5').innerText = 
`üß© ‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ï‡∏¥‡∏°‡πÇ‡∏ö‡∏ô‡∏±‡∏™ üß©
‡πÇ‡∏õ‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏ü‡∏£‡∏µ‡πÄ‡∏Å‡∏°‡∏™‡πå X10

User : ${user}
‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏ö‡∏¥‡∏• : ${billNumber}

‡πÄ‡∏•‡πà‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏ü‡∏£‡∏µ‡πÄ‡∏Å‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏ö‡∏ó : ${betValue} x10 ‡πÄ‡∏ó‡πà‡∏≤
‡∏à‡∏∂‡∏á‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡πÇ‡∏ö‡∏ô‡∏±‡∏™‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ô‡∏µ‡πâ : ${bonusAmount} ‡∏ö‡∏≤‡∏ó

‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏î‡∏µ ‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç
‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡πÉ‡∏´‡πâ‡πÇ‡∏≠‡∏Å‡∏≤‡∏™‡πÄ‡∏£‡∏≤
‡πÑ‡∏î‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏ô‡∏∞‡∏Ñ‡∏∞‚ù§Ô∏è`;

  document.getElementById('output6').innerText = 
`üß© ‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏õ‡∏£ : ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ü‡∏£‡∏µ‡πÄ‡∏Å‡∏° X10 ‡πÄ‡∏ó‡πà‡∏≤ üß©
üß© ‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ : ${name}
üß© User : ${user}
üß© ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏ö‡∏¥‡∏• : ${billNumber}
üß© ‡∏¢‡∏≠‡∏î‡πÄ‡∏ö‡∏ó : ${betValue}
üß© ‡∏¢‡∏≠‡∏î‡πÇ‡∏ö‡∏ô‡∏±‡∏™‡∏ó‡∏µ‡πà‡πÄ‡∏ï‡∏¥‡∏°‡πÉ‡∏´‡πâ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ : ${bonusAmount} ‡∏ö‡∏≤‡∏ó
üß© ‡∏ö‡∏¥‡∏•‡πÄ‡∏ß‡∏•‡∏≤ : ${dayTime}
üß© ‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏ï‡∏¥‡∏° : TA üß©`;

  document.getElementById('outputNote3').innerText = `‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ü‡∏£‡∏µ ‡∏£‡∏±‡∏ö‡∏ü‡∏£‡∏µ x10 | ${billNumber} | ‡πÄ‡∏ö‡∏ó ${priceBet}/${priceBet*10} ‡∏ö‡∏≤‡∏ó ‡∏ö‡∏¥‡∏•‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà ${dayTime}`;
}

// --------------------------
// üìä ‡∏™‡πÄ‡∏ï‡πá‡∏õ‡∏ú‡∏¥‡∏î‡∏´‡∏°‡∏î (step 4)
// --------------------------

function generateBonusText4() {
  const user = document.getElementById('user4').value;
  const billNumber = document.getElementById('billNumber4').value;
  const priceBet = Number(document.getElementById('priceBet4').value) || 0;
  const name = document.getElementById('name4').value;
  const dayTime = document.getElementById('dayTime4').value;
  const step = Number(document.getElementById('step4').value) || 0;

  let multiplier = 1;
  if ([5, 6].includes(step)) multiplier = 2;
  else if ([7, 8].includes(step)) multiplier = 4;

  const deposit = priceBet * multiplier;
  document.getElementById('deposit4').value = deposit + ' ‡∏ö‡∏≤‡∏ó';

  document.getElementById('output7').innerText = 
`üß© ‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏ï‡∏¥‡∏°‡πÇ‡∏ö‡∏ô‡∏±‡∏™ üß©
‡∏™‡πÄ‡∏ï‡πá‡∏õ‡∏ú‡∏¥‡∏î‡∏´‡∏°‡∏î

User : ${user}
‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏ö‡∏¥‡∏• : ${billNumber}
‡∏¢‡∏≠‡∏î‡πÄ‡∏î‡∏¥‡∏°‡∏û‡∏±‡∏ô : ${priceBet} ‡∏ö‡∏≤‡∏ó
‡∏¢‡∏≠‡∏î‡πÄ‡∏ï‡∏¥‡∏° : ${deposit} ‡∏ö‡∏≤‡∏ó
Name : ${name}
Day & Time : ${dayTime}
Step : ${step}

‡∏Ç‡∏≠‡πÉ‡∏´‡πâ‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏î‡∏µ ‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç
‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡πÉ‡∏´‡πâ‡πÇ‡∏≠‡∏Å‡∏≤‡∏™‡πÄ‡∏£‡∏≤
‡πÑ‡∏î‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏ô‡∏∞‡∏Ñ‡∏∞‚ù§Ô∏è`;

  document.getElementById('output8').innerText = 
`üß© ‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏õ‡∏£ : ‡∏™‡πÄ‡∏ï‡πá‡∏õ‡∏ú‡∏¥‡∏î‡∏´‡∏°‡∏î üß©
üß© ‡∏ä‡∏∑‡πà‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ : ${name}
üß© User : ${user}
üß© ‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏ö‡∏¥‡∏• : ${billNumber}
üß© ‡∏¢‡∏≠‡∏î‡πÄ‡∏ö‡∏ó : ${priceBet} ‡∏ö‡∏≤‡∏ó ‚Üí ‡∏™‡πÄ‡∏ï‡πá‡∏õ ${step}
üß© ‡∏¢‡∏≠‡∏î‡πÇ‡∏ö‡∏ô‡∏±‡∏™‡∏ó‡∏µ‡πà‡πÄ‡∏ï‡∏¥‡∏°‡πÉ‡∏´‡πâ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤ : ${deposit} ‡∏ö‡∏≤‡∏ó
üß© ‡∏ö‡∏¥‡∏•‡πÄ‡∏ß‡∏•‡∏≤ : ${dayTime}
üß© ‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏ï‡∏¥‡∏° : TA üß©`;

  document.getElementById('outputNote4').innerText = `‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô ‡∏Ñ‡∏≠‡∏ö‡∏≠‡∏•‡∏™‡πÄ‡∏ï‡πá‡∏õ-‡∏Ñ‡∏≠‡∏°‡∏ß‡∏¢‡∏™‡πÄ‡∏ï‡πá‡∏õ  | ${billNumber} | ‡∏™‡πÄ‡∏ï‡πá‡∏õ ${step} ‡∏¢‡∏≠‡∏î‡πÄ‡∏ï‡∏¥‡∏° ${deposit} ‡∏ö‡∏≤‡∏ó ‡∏ö‡∏¥‡∏•‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà ${dayTime} ‡∏ô.`;
}

// --------------------------
// üìù ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° note (note1, note2)
// --------------------------

// ‚úÖ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÇ‡∏ô‡πâ‡∏ï‡πÉ‡∏´‡πâ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏Å‡∏•‡πà‡∏≠‡∏á
function generateNote(index, type = "default") {
  const gameId = document.getElementById(`billNumber${index}`)?.value || "PGXXXXXXXXXXXXXX";
  const bet = document.getElementById(`priceBet${index}`)?.value || "0";
  const amount = document.getElementById(`deposit${index}`)?.value || "0";
  const datetime = document.getElementById(`dayTime${index}`)?.value || new Date().toLocaleString("th-TH");

  let noteText = "";
  if (type === "special") {
    noteText = `‡πÇ‡∏õ‡∏£‡∏û‡∏¥‡πÄ‡∏®‡∏©‡∏£‡∏≤‡∏¢‡∏ß‡∏±‡∏ô | #${gameId} | ‡πÄ‡∏ö‡∏ó ${bet}/${amount} ‡∏ö‡∏≤‡∏ó | ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà ${datetime}`;
  } else {
    noteText = `‡πÇ‡∏õ‡∏£‡πÇ‡∏°‡∏ä‡∏±‡πà‡∏ô ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ü‡∏£‡∏µ ‡∏£‡∏±‡∏ö‡∏ü‡∏£‡∏µ x10 | #${gameId} | ‡πÄ‡∏ö‡∏ó ${bet}/${amount} ‡∏ö‡∏≤‡∏ó ‡∏ö‡∏¥‡∏•‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà ${datetime}`;
  }

  const output = document.getElementById(`outputNote${index}`);
  if (output) output.innerText = noteText;
}

// ‚úÖ ‡∏ú‡∏π‡∏Å Event Listener ‡πÉ‡∏´‡πâ‡∏ü‡∏¥‡∏•‡∏î‡πå‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï note ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
function attachNoteListeners(index, type = "default") {
  const fields = [
    `billNumber${index}`,
    `priceBet${index}`,
    `deposit${index}`,
    `dayTime${index}`
  ];

  fields.forEach(fieldId => {
    const input = document.getElementById(fieldId);
    if (input) {
      input.addEventListener("input", () => generateNote(index, type));
    }
  });
}

// ‚úÖ ‡∏£‡∏≠ DOM ‡πÇ‡∏´‡∏•‡∏î‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏≥‡∏á‡∏≤‡∏ô
document.addEventListener("DOMContentLoaded", () => {
  // ‡∏õ‡∏∏‡πà‡∏° Submit ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Note 3 (‡∏Å‡∏•‡πà‡∏≠‡∏á 3)
  document.getElementById("submitNote3")?.addEventListener("click", () => {
    generateNote(3, "default");
  });

  // ‡∏õ‡∏∏‡πà‡∏° Submit ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Note 4 (‡∏Å‡∏•‡πà‡∏≠‡∏á 4)
  document.getElementById("submitNote4")?.addEventListener("click", () => {
    generateNote(4, "special");
  });

  // ‡∏£‡∏∞‡∏ö‡∏ö auto-update ‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏û‡∏¥‡∏°‡∏û‡πå
  attachNoteListeners(3, "default");
  attachNoteListeners(4, "special");

  // ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å‡πÑ‡∏î‡πâ
  const copyableBoxes = document.querySelectorAll('.chat-box, [id^="output"], [id^="noteOutput"], [id^="outputNote"]');
  copyableBoxes.forEach(box => {
    box.style.cursor = 'pointer';
    box.addEventListener('click', () => {
      const textToCopy = box.innerText.trim();
      copyTextAndNotify(textToCopy);
    });
  });

  // ‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô (‡∏ï‡πâ‡∏≠‡∏á‡∏°‡∏µ‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£ `page`)
  pages.forEach(p => p.classList.remove('active'));
  const pageElement = document.getElementById(`${page}-page`);
  if (pageElement) pageElement.classList.add('active');
});

